go-inventory/
â”‚â”€â”€ .env
â”‚â”€â”€ .gitignore
â”‚â”€â”€ go.mod
â”‚â”€â”€ go.sum
â”‚â”€â”€ main.go
â”‚
â”œâ”€â”€ config/                  # ğŸ›  Configuration files
â”‚   â”œâ”€â”€ config.go            # Load environment variables
â”‚
â”œâ”€â”€ internal/                # ğŸ”¥ Core application logic
â”‚   â”œâ”€â”€ db/                  # Database logic
â”‚   â”‚   â”œâ”€â”€ db.go            # Get database connection
â”‚   â”‚   â”œâ”€â”€ mysql/
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.go # MySQL connection setup
â”‚   â”‚   â”‚   â”œâ”€â”€ product_repo.go # MySQL Product Repository
â”‚   â”‚   â”‚   â”œâ”€â”€ order_repo.go   # MySQL Order Repository
â”‚   â”‚   â”œâ”€â”€ postgres/
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.go # PostgreSQL connection setup
â”‚   â”‚   â”‚   â”œâ”€â”€ product_repo.go # PostgreSQL Product Repository
â”‚   â”‚   â”‚   â”œâ”€â”€ order_repo.go   # PostgreSQL Order Repository
â”‚
â”‚   â”œâ”€â”€ products/             # ğŸ“¦ Product domain logic
â”‚   â”‚   â”œâ”€â”€ routes.go         # Product routes
â”‚   â”‚   â”œâ”€â”€ repository.go     # Product repository interface
â”‚   â”‚   â”œâ”€â”€ service.go        # Business logic for products
â”‚   â”‚   â”œâ”€â”€ handler.go        # HTTP handlers for products
â”‚
â”‚   â”œâ”€â”€ orders/               # ğŸ“¦ Order domain logic
â”‚   â”‚   â”œâ”€â”€ routes.go         # Order routes
â”‚   â”‚   â”œâ”€â”€ repository.go     # Order repository interface
â”‚   â”‚   â”œâ”€â”€ service.go        # Business logic for orders
â”‚   â”‚   â”œâ”€â”€ handler.go        # HTTP handlers for orders
â”‚
â”‚   â”œâ”€â”€ utils/                # ğŸ”§ Utility functions
â”‚   â”‚   â”œâ”€â”€ response.go       # Helper for JSON responses
â”‚
â””â”€â”€ pkg/                      # ğŸ— External libraries or helper functions


export DB_TYPE=mysql
go run cmd/server/main.go

CREATE TABLE products ( id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255) NOT NULL, quantity INT NOT NULL, price INT NOT NULL );

INSERT INTO products (name, quantity, price)
SELECT
    CONCAT('Product ', FLOOR(RAND() * 1000)),  -- Random product name
    FLOOR(RAND() * 100) + 1,  -- Random quantity (1-100)
    ROUND(RAND() * 500, 2)  -- Random price (0-500)
FROM (SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5) AS t1,
     (SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5) AS t2,
     (SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5) AS t3,
     (SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5) AS t4;


CREATE TABLE orders (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    customer_name VARCHAR(255) NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

INSERT INTO orders (product_id, customer_name, total_price)
SELECT
    id AS product_id,
    CONCAT('Customer ', FLOOR(RAND() * 1000)) AS customer_name,
    ROUND(RAND() * 100 + 10, 2) AS total_price
FROM products
ORDER BY RAND()
LIMIT 10;


postgres

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    product_id INT NOT NULL,
    customer_name VARCHAR(255) NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT fk_product FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);